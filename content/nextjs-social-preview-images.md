---
title: 'Automating Social Preview Images on my Next.js Blog'
date: '2022-01-02'
category: 'react'
description: 'Dynamically generating open-graph images for social media previews using resoc and mustache.'
---

After taking the time to rewrite this website to use Next.js over Gatsby, I decided to put together a roadmap. Social preview images were added to that roadmap fairly early on because I find it personally frustrating when websites I'm trying to share don't have metadata previews.

## About `resoc`

### What is `mustache`?

## Install the Library

To get started, we need to install two packages as dev dependencies.

```sh
yarn add -D @resoc/core @resoc/create-img
```

From here, we have two options to get started creating our templates:

1. Use resoc's Image Template Development Kit ([`itdk`](https://www.npmjs.com/package/itdk)) to create a sample template that we can edit.
2. Create the templates by hand. I'm going to choose this option because I have two different templates I want to generate.

## Creating the `mustache` Templates

For each template, you only need three files to get started: a `css.mustache` for styling the content generated by `html.mustache`, all controlled by a `manifest.json`. You'll want to co-locate the templates with your source code. As we'll be creating two different templates, the file structure should be as follows:

```
resoc-templates/
    ↳ default/
        ↳ resoc.manifest.json
        ↳ default.html.mustache
        ↳ default.css.mustache
    ↳ landing/
        ↳ resoc.manifest.json
        ↳ landing.html.mustache
        ↳ landing.css.mustache
```

Run the following command to bring up a

```sh
# npx itdk view <path-to-your-templates>/<title>.manifest.json
npx itdk view resoc-templates/landing/resoc.manifest.json
```

Let's start with the landing social image as it will rely on the fewest variables.

## Styling the Templates

```css
@import url('https://fonts.googleapis.com/css2?family=Bree+Serif&family=Fira+Code&display=swap');

main {
  flex: 1;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  margin: 0 auto;
  padding: 1vh 2.5vw;
  background: linear-gradient(72deg, #1f00ac, #ff2dd1);
  line-height: 1;
}

img {
  width: auto;
  height: 250px;
  padding-top: 2vh;
}

h1 {
  color: white;
  font-family: 'Bree Serif', serif;
  font-size: 16vh;
  margin-bottom: 0;
}

h2 {
  color: white;
  font-family: 'Fira Code', monospace;
  font-size: 9vh;
}
```

---

Check out [the PR](https://github.com/kale-stew/kyliestewart.tech/pull/4) on Github.
